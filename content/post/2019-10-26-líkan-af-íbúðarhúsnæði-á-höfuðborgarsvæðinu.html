---
title: Líkan af íbúðarhúsnæði á höfuðborgarsvæðinu
author: Viðar
date: '2019-10-26'
draft: true
slug: líkan-af-íbúðarhúsnæði-á-höfuðborgarsvæðinu
categories:
  - forecast
  - irf
tags:
  - var
  - vec
  - arima
description: ''
topics: []
---

<script src="/rmarkdown-libs/kePrint/kePrint.js"></script>


<p>Fyrir stuttu síðan tók ég saman gögn um hámarkshlutfall sem íslenskar fjármálastofnanir lána til fasteignakaupa. Ég hafði áhuga á því að skoða þetta hlutfall í samhengi við hækkun fasteignaverðs á höfuðborgarsvæðinu. Að neðan mun ég skoða gögnin með myndrænum hætti auk þess sem ég met VAR (og VEC líkan ef það hentar) til að varpa ljósi á áhrif hámarks lánshlutfalls á þróun fasteignaverðs.</p>
<div id="gögn" class="section level2">
<h2>Gögn</h2>
<p>Gögnin sem ég nota eru fengin úr nokkrum áttum. Allt eru þetta mánaðarleg gögn. Fyrir verð á íbúðarhúsnæði nota ég vísitölu íbúðaverðs á höfuðborgarsvæðinu sem Þjóðskrá gefur út. Þá er ég með upplýsingar um skuldir heimilana sem ég fékk hjá Seðlabanka Íslands. Þetta eru allar skuldir heimila en ekki aðeins húsnæðisskuldir. Ég geng út frá því í greiningunni að þessi tímaröð og sú sem ætti aðeins við um lán til fasteignakaupa séu nátengdar (svo þarf ekki að vera). Þá er ég með upplýsingar um hámarks lánshlutfall sem bankarnir þrír ásamt Íbúðalánasjóði lána til fasteignakaupa, sjá <a href="https://drive.google.com/open?id=1rqTnfF3TyLHb_mClsCPYEfMnhj6oGmCc">hér</a>. Þessum gögnum safnaði ég af <a href="www.vefsafn.is">Vefsafn.is</a>. Ekki voru til samfelldar upplýsingar af vefsvæðum gömlu bankanna og því gat verið að ég hafði upplýsingar um hámarksútlán í október en síðan ekkert fyrr en í febrúar árið eftir. Ef breytingar áttu sér stað á tímabilinu þurfti ég að geta mér til um hvenær þær breytingar hafi átt sér stað. Athugasemdir um söfnun þessara gagna er að vinna í Excel skjalinu sem ég hlekkjaði á hér að ofan. Þá er ég með lægstu vexti sem eru í boði til fasteignakaupa, útborguð heildarlaun og vísitölu húsaleigu fyrir landið allt. Þetta eru ekki fullkomin gögn, t.d. væri best að hafa vísitölu leiguhúsnæðis aðeins fyrir höfuðborgarsvæðið og alveg aftur til t.d. 1990.</p>
</div>
<div id="grafísk-greining" class="section level2">
<h2>Grafísk greining</h2>
<p>Fyrsta myndin sýnir þróun þeirra sex breyta sem ég mun styðjast við. Gífurleg hækkun fasteignaverðs átti sér stað frá lok árs 2004 þegar bæði hámars hlutfall hækkaði úr 65% í 100% á 2-3 mánuðum og vextir fasteignalána voru lækkaðir.</p>
<p><img src="/post/2019-10-26-líkan-af-íbúðarhúsnæði-á-höfuðborgarsvæðinu_files/figure-html/unnamed-chunk-1-1.png" width="768" /></p>
<p>Næst sýni ég dreifingu eftir hámarks lánshlutfalli. Hér mætti einnig skoða meðallánshlutfall sem lánastofnanir buðu. Ég ákvað þó að fara þá leið í þessari greiningu að nota hæsta hlutfallið sem var í boði á hverjum tíma.<br />
Ég er almennt ekki hlynntur því að birta gröf sem sýnir samband tveggja breyta þegar vitað er að aðrar breytur kunna að hafa áhrif. Ástæðan er sú að það er auðvelt að sýna jákvætt samband milli tveggja breyta en sambandið hverfur eða jafnvel breytir um formerki við það eitt að taka tillit til þriðju breytunnar. Hér geri ég þó undantekningu með því að sýna samband milli tólf mánaða hækkun fasteignaverðs og hámarks hlutfalls með þeim fyrirvörum að þetta kunni að breytast eftir að tekið er tillit til annarra breyta.</p>
<p>Neðangreint graf kallst box-plot. Box plot samanstendur af <em>hinges</em> og <em>whiskers</em>. Hinges eru efri og neðri mörk kassans. Efri mörkin eru efri fjórðungsmörk og neðri mörkin eru neðri fjórðungsmörk. Neðri fjórðungsmörk eru skilgreind á þann hátt að 25% gildanna (tólf mánað breyting í þessu dæmi) eru undir neðri fjórðungsmörkum. Á sama hátt eru 25% gildanna yfir efri fjórðungsmörkum.<br />
Whiskers eru lóðréttu strikin sem koma upp úr og niður úr boxinu. Efra stirkið nær frá efir mörkum boxins upp í hæsta gildið þó aldrei hærra en 1.5 x IQR, sama á við um neðra strikið. Gildi sem fara út fyrir <em>whiskers</em> kallst útlagar.<br />
(IQR: inter quartile range eða bil milli efri og neðri marka boxins).</p>
<p><img src="/post/2019-10-26-líkan-af-íbúðarhúsnæði-á-höfuðborgarsvæðinu_files/figure-html/unnamed-chunk-2-1.png" width="768" /></p>
<p>Út frá myndunum að ofan er hægt að draga þá ályktun að þegar lánshlutfall er hærra, þá er tólf mánaða hækkun fasteignaverðs hærri.</p>
<p>Gröf ein og sér svara því þó ekki fyllilega hver áhrif hærra lánshlutfalls er á fasteignaverðs. Til að fá betra svar sný ég mér að tölfræðilíkönum.</p>
</div>
<div id="var-og-vec-líkön" class="section level2">
<h2>VAR og VEC líkön</h2>
<p>VAR (vector autoregression) og VEC (vector error correction) eru tvær aðferðir sem hægt er að nota til að varpa ljósi á áhrif hærra lánshlutfalls á fasteignaverðs. Þá á ég sérstaklega við viðbragðsföll (e. impulse response function). Bæði líkönin má einnig nota til að framkvæma spár. VAR er eflaust betra fyrir skammtímaspár en VEC fyrir langtímaspár þar sem VEC nær utan um langtímasamband breyta sem VAR nær ekki utan um.</p>
<p>Hér að neðan er hægt að sprengja út þríhyrninginn þar sem farið er ítarlega í gegnum VAR og VEC líkön með kóða í R. Sá hluti er aðeins hugsaður sem viðauki fyrir þá sem hafa áhuga. Hinir geta flett yfir og farið beint í greininguna að neðan.</p>
<details>
<p><summary> VAR og VECM - Ítarefni og uppskrift </summary>
VAR og VEC líkön eru ein af vinsælustu tölfræðilíkönunum sem hagfræðingar styðjast við í sínum greiningum. Ótal bækur hafa verið skrifaðar þar sem aðal áherslan er VAR og VEC líkön. Ég hef stuðst nokkuð við bækur eftir Lütkepohl. <em>Applied time series econometrics</em> er góð og hægt að fara beint í kafla þrjú fyrir þessi líkön. Þá er einnig gagnlegt að fara í gegnum inngang að <strong>vars</strong> pakkanum í R, sjá <a href="https://cran.r-project.org/web/packages/vars/vignettes/vars.pdf">hér</a>.</p>
<p>VEC líkön taka tillit til þess þegar langtímasambanda/samþættingarsamband er á milli breyta. Það verður að teljast líklegt að slíkt samband sé á milli fasteignaverðs og launa og/eða fasteignaverðs og leigu.</p>
<p>Ef tvær ósístæðar tímaraðir (e. non-stationary) verða sístæðar við að taka mismun d sinnum (t.d. einusinni) og til er línulegt samband á milli þessara breyta sem er þáttað (e. integrated) af gráðu d-1, þá eru breyturnar sagðar samþættar. Tökum dæmi.<br />
Grafið að neðan sýnir vísitölu íbúðaverðs á höfuðborgarsvæðinu og vísitölu útborgaðra heildarlauna. Á grafinu að dæma virðist vera langtíma samband á milli breytanna þó það komi tímabil þar sem ójafnvægi myndast. Ef það er samþættingarsamband á milli breytann þá mun fyrr eða síðar gapið þarna á milli lokast.</p>
<pre class="r"><code>price_rent &lt;- gogn %&gt;% dplyr::select(date, ibudarhus, utborgad) %&gt;% 
  mutate(&quot;Útborguð heildarlaun&quot; = utborgad/utborgad[1]*100,
         &quot;Íbúðaverð&quot; = ibudarhus) %&gt;% 
  dplyr::select(-c(ibudarhus, utborgad)) %&gt;% 
  pivot_longer(cols = 2:3,
               names_to = &quot;key&quot;,
               values_to = &quot;value&quot;)

ggplot(price_rent,
       aes(x = date,
           y = value,
           col = key)) + 
  geom_line() + 
  labs(y = NULL,
       x = &quot;Dagsetning&quot;,
       title = &quot;Vísitala fasteignaverðs og útborgaðra launa&quot;,
       subtitle = &quot;Vísitölur = 100 í janúar 1994&quot;) + 
  theme(legend.position = &quot;bottom&quot;,
        legend.title = element_blank()) +
  scale_color_tableau()</code></pre>
<p><img src="/post/2019-10-26-líkan-af-íbúðarhúsnæði-á-höfuðborgarsvæðinu_files/figure-html/coint_graph-1.png" width="768" /></p>
<p>Hér verður kannað hvort samþættingarsamband sé á milli fasteignaverðs, leigu og launa. Ef svo er þá er hentugar að styðjast við VEC líkan en VAR. Fyrst þarf að velja fjölda tafinna gilda. Það geri ég með <code>VARselect</code>. AIC, HQ, SC og FPE gefa öll misjafna niðurstöðu. Sagt er að AIC eigi það til að velja of mörg tafin gildi. HQ og BIC/SC virðast velja mjög fá tafin gildi, 1. Til að kanna hvort það sé samþættingarsamband þá þarf ég að nota í það minnsta tvö tafin gildi. Styðst því við AIC hér sem segir að fjögur tafin gildi séu heppilegasta lag length.</p>
<p>Fjögur tafin gildi virðist þó duga. Þá er nota ég einnig constant og deterministic regressors ásamt árstíðarbundnum dummy breytum. Þetta geri ég með <code>type = both</code> og <code>season = 12</code>. Fjöldi tafinna gilda sem eru valin fer einnig eftir því hvor ég nota const, trend eða both í <code>type</code>. Eitt tafið gildi virðist vera nóg en það er oft lítið fyrir Jóhansen prófið sem ég framkvæmi næst. Taflan að neðan sýnir fjölda tafinna gilda eftir</p>
<table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
none
</th>
<th style="text-align:right;">
const
</th>
<th style="text-align:right;">
trend
</th>
<th style="text-align:right;">
both
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;width: 2cm; ">
AIC(n)
</td>
<td style="text-align:right;width: 2cm; ">
4
</td>
<td style="text-align:right;width: 2cm; ">
4
</td>
<td style="text-align:right;width: 2cm; ">
4
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;width: 2cm; ">
HQ(n)
</td>
<td style="text-align:right;width: 2cm; ">
3
</td>
<td style="text-align:right;width: 2cm; ">
3
</td>
<td style="text-align:right;width: 2cm; ">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;width: 2cm; ">
SC(n)
</td>
<td style="text-align:right;width: 2cm; ">
1
</td>
<td style="text-align:right;width: 2cm; ">
1
</td>
<td style="text-align:right;width: 2cm; ">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;width: 2cm; ">
FPE(n)
</td>
<td style="text-align:right;width: 2cm; ">
4
</td>
<td style="text-align:right;width: 2cm; ">
4
</td>
<td style="text-align:right;width: 2cm; ">
4
</td>
<td style="text-align:right;">
4
</td>
</tr>
</tbody>
</table>
<pre class="r"><code># No intercept and no trend variable in cointegration
summary(ca.jo(as.matrix(gogn_2[,-1]),
      type = &quot;eigen&quot;,
      ecdet = &quot;none&quot;,
      K = 4,
      season = 12))</code></pre>
<pre><code>## 
## ###################### 
## # Johansen-Procedure # 
## ###################### 
## 
## Test type: maximal eigenvalue statistic (lambda max) , with linear trend 
## 
## Eigenvalues (lambda):
## [1] 0.22304041 0.13700498 0.06190317 0.03645036 0.02551851 0.01707627
## 
## Values of teststatistic and critical values of test:
## 
##           test 10pct  5pct  1pct
## r &lt;= 5 |  4.20  6.50  8.18 11.65
## r &lt;= 4 |  6.31 12.91 14.90 19.19
## r &lt;= 3 |  9.06 18.90 21.07 25.75
## r &lt;= 2 | 15.59 24.78 27.14 32.14
## r &lt;= 1 | 35.95 30.84 33.32 38.78
## r = 0  | 61.58 36.25 39.43 44.59
## 
## Eigenvectors, normalised to first column:
## (These are the cointegration relations)
## 
##                   max_hlutfall.l4 laegstu_vextir.l4  d_debt.l4 log_price.l4
## max_hlutfall.l4         1.0000000          1.000000  1.0000000    1.0000000
## laegstu_vextir.l4     -42.0580926         19.427077 42.5852484   -3.0913245
## d_debt.l4              -2.0862092          2.433279 -0.8059334    0.4990821
## log_price.l4           -0.4189044         -1.653161 -0.5881706   -1.6115649
## log_leiga.l4           -3.2542993         -1.029378 -0.7711250   -0.3626862
## log_laun.l4             3.4919353          3.434418  1.7234209    2.4236111
##                   log_leiga.l4 log_laun.l4
## max_hlutfall.l4     1.00000000  1.00000000
## laegstu_vextir.l4  14.46549098 10.82233095
## d_debt.l4           0.08815393 -0.09729557
## log_price.l4       -0.13219111 -1.98758039
## log_leiga.l4        0.87547576  0.87075347
## log_laun.l4        -0.94549886  0.73689541
## 
## Weights W:
## (This is the loading matrix)
## 
##                  max_hlutfall.l4 laegstu_vextir.l4     d_debt.l4  log_price.l4
## max_hlutfall.d      0.0302324239     -0.0090998118 -0.0313625686 -0.0089166793
## laegstu_vextir.d    0.0005443599      0.0003842356 -0.0004005599  0.0004131244
## d_debt.d            0.0471301128     -0.0267563627  0.0441614087 -0.0038093761
## log_price.d         0.0300280633      0.0077257840  0.0072127594  0.0062653293
## log_leiga.d         0.0059122834      0.0143568464  0.0087119645 -0.0102960520
## log_laun.d          0.0068169309      0.0002152837  0.0005892370 -0.0030333701
##                   log_leiga.l4   log_laun.l4
## max_hlutfall.d   -0.0115886911 -0.0005909396
## laegstu_vextir.d  0.0005260569 -0.0001590910
## d_debt.d          0.0005613103 -0.0040869754
## log_price.d      -0.0057256240  0.0029867549
## log_leiga.d      -0.0034429518 -0.0013366742
## log_laun.d        0.0073137841  0.0009373368</code></pre>
<pre class="r"><code># Constant term in cointegration
summary(ca.jo(as.matrix(gogn_2[,-1]),
      type = &quot;eigen&quot;,
      ecdet = &quot;const&quot;,
      K = 4,
      season = 12))</code></pre>
<pre><code>## 
## ###################### 
## # Johansen-Procedure # 
## ###################### 
## 
## Test type: maximal eigenvalue statistic (lambda max) , without linear trend and constant in cointegration 
## 
## Eigenvalues (lambda):
## [1]  2.508226e-01  1.776160e-01  8.920426e-02  5.891585e-02  3.105174e-02
## [6]  2.167376e-02 -1.323273e-16
## 
## Values of teststatistic and critical values of test:
## 
##           test 10pct  5pct  1pct
## r &lt;= 5 |  5.35  7.52  9.24 12.97
## r &lt;= 4 |  7.70 13.75 15.67 20.20
## r &lt;= 3 | 14.82 19.77 22.00 26.81
## r &lt;= 2 | 22.80 25.56 28.14 33.24
## r &lt;= 1 | 47.71 31.66 34.40 39.79
## r = 0  | 70.46 37.45 40.30 46.82
## 
## Eigenvectors, normalised to first column:
## (These are the cointegration relations)
## 
##                   max_hlutfall.l4 laegstu_vextir.l4   d_debt.l4 log_price.l4
## max_hlutfall.l4         1.0000000          1.000000    1.000000    1.0000000
## laegstu_vextir.l4     -26.5085422        676.803293 -141.719125   34.8609055
## d_debt.l4              -1.3325974         38.406305    6.726807   -0.5697929
## log_price.l4           -0.5517935         -9.239696   -5.108876   -0.8241985
## log_leiga.l4           -2.6379906         24.182137   -7.094276   -1.0568226
## log_laun.l4             3.1311682         -7.702613   14.347650    2.3520151
## constant              -19.8001577        -22.153475 -102.857025  -20.6818319
##                   log_leiga.l4 log_laun.l4   constant
## max_hlutfall.l4      1.0000000  1.00000000  1.0000000
## laegstu_vextir.l4    4.5282753 23.56257407 20.1066672
## d_debt.l4            0.3173618 -0.03507737 -0.2172660
## log_price.l4        -0.9357552  1.11870999 -0.4402117
## log_leiga.l4         0.5093953  0.86919253  0.3385488
## log_laun.l4          0.4772411 -2.24448853 -0.1900143
## constant            -4.4572138 14.45740221  1.1911911
## 
## Weights W:
## (This is the loading matrix)
## 
##                  max_hlutfall.l4 laegstu_vextir.l4     d_debt.l4  log_price.l4
## max_hlutfall.d      0.0182813816     -1.599803e-03  0.0011790318 -3.106588e-02
## laegstu_vextir.d    0.0003786077     -7.321068e-06  0.0001492573 -2.742268e-05
## d_debt.d            0.0270744967     -2.931852e-03 -0.0036072152  4.187120e-02
## log_price.d         0.0373203409      1.435179e-06  0.0008257883  9.522196e-03
## log_leiga.d         0.0196681105      1.105349e-03  0.0004088194  6.460580e-03
## log_laun.d          0.0138015661      2.275325e-04 -0.0013211146 -4.191874e-03
##                   log_leiga.l4   log_laun.l4      constant
## max_hlutfall.d   -0.0165000797 -0.0016209172 -5.520516e-15
## laegstu_vextir.d  0.0005243704  0.0002906342 -1.342934e-15
## d_debt.d         -0.0109319128  0.0057253979 -5.887896e-14
## log_price.d       0.0063847958 -0.0055614895 -7.525260e-14
## log_leiga.d      -0.0156814977  0.0019440555 -2.912491e-14
## log_laun.d        0.0033206583  0.0010024337 -3.086178e-15</code></pre>
<pre class="r"><code># Trend term in cointegration
summary(ca.jo(as.matrix(gogn_2[,-1]),
      type = &quot;eigen&quot;,
      ecdet = &quot;trend&quot;,
      K = 4,
      season = 12))</code></pre>
<pre><code>## 
## ###################### 
## # Johansen-Procedure # 
## ###################### 
## 
## Test type: maximal eigenvalue statistic (lambda max) , with linear trend in cointegration 
## 
## Eigenvalues (lambda):
## [1] 2.419238e-01 1.382234e-01 9.165892e-02 5.587544e-02 3.626920e-02
## [6] 2.211013e-02 1.117346e-17
## 
## Values of teststatistic and critical values of test:
## 
##           test 10pct  5pct  1pct
## r &lt;= 5 |  5.46 10.49 12.25 16.26
## r &lt;= 4 |  9.01 16.85 18.96 23.65
## r &lt;= 3 | 14.03 23.11 25.54 30.34
## r &lt;= 2 | 23.46 29.12 31.46 36.65
## r &lt;= 1 | 36.30 34.75 37.52 42.36
## r = 0  | 67.58 40.91 43.97 49.51
## 
## Eigenvectors, normalised to first column:
## (These are the cointegration relations)
## 
##                   max_hlutfall.l4 laegstu_vextir.l4    d_debt.l4 log_price.l4
## max_hlutfall.l4        1.00000000        1.00000000  1.000000000   1.00000000
## laegstu_vextir.l4     -0.55577473      -30.61336678 37.120916769 -64.33078736
## d_debt.l4             -0.94709990        6.88941059  0.100316598   9.06470248
## log_price.l4          -0.30197094       -4.60096595 -0.328067759   2.88341542
## log_leiga.l4          -1.19207684       -5.16953654  0.522264862  15.12564708
## log_laun.l4            0.28485215       16.34114991 -1.719469315 -38.63487744
## trend.l4               0.00619706       -0.02388378  0.008744434   0.09123323
##                   log_leiga.l4  log_laun.l4    trend.l4
## max_hlutfall.l4    1.000000000  1.000000000  1.00000000
## laegstu_vextir.l4  1.846627029  7.141896363 86.39804986
## d_debt.l4          0.453064663 -0.017667846  1.04426649
## log_price.l4      -1.346025740  0.714520548  1.05326713
## log_leiga.l4      -0.088349951  0.911295409  0.39824550
## log_laun.l4        1.524400866 -0.563119711 -9.54210261
## trend.l4           0.001281591 -0.007174733  0.04829104
## 
## Weights W:
## (This is the loading matrix)
## 
##                  max_hlutfall.l4 laegstu_vextir.l4    d_debt.l4  log_price.l4
## max_hlutfall.d       0.055350819     -0.0019551230 -0.095695625  1.755208e-03
## laegstu_vextir.d     0.000847737      0.0001417416 -0.001465228  1.652443e-05
## d_debt.d             0.107134567     -0.0080614025 -0.004917202 -4.446584e-03
## log_price.d          0.071563393      0.0025354317  0.019903329 -3.781565e-04
## log_leiga.d          0.007960449      0.0047492946  0.001329398 -9.574746e-04
## log_laun.d           0.022134626     -0.0001545152  0.027030298  5.362547e-04
##                   log_leiga.l4   log_laun.l4      trend.l4
## max_hlutfall.d   -0.0120237450 -0.0027629266 -1.535224e-14
## laegstu_vextir.d  0.0005159894  0.0003142449  3.953432e-15
## d_debt.d         -0.0067443720  0.0050607417  7.983201e-14
## log_price.d       0.0079091807 -0.0048400372  7.134272e-14
## log_leiga.d      -0.0135613830  0.0006391947  5.823907e-14
## log_laun.d       -0.0026513690  0.0011558951 -3.177400e-14</code></pre>
<p>Engin samhljómur er í prófunum um hversu mörg samþættingarsambönd eru. Niðurstöðurnar eru 0, 1 eða tvö. Ég mun prófa öll að neðan og athuga hvort IRF sé ólíkt eftir því hvaða leið er farin.</p>
</details>
</div>
<div id="var-líkan" class="section level1">
<h1>VAR líkan</h1>
<pre><code>## AIC(n)  HQ(n)  SC(n) FPE(n) 
##      4      3      1      4</code></pre>
</div>
